<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<style>
:root{--bg-soft:#f8fafc;--border-soft:#e5e7eb;--text-muted:#64748b;--primary:#0ea5e9;--primary-dark:#0284c7}
.card{border:1px solid var(--border-soft);border-radius:14px;box-shadow:0 8px 28px rgba(2,8,23,.08);overflow:hidden;background:#fff}
.card-header{background:linear-gradient(180deg,#f8fafc,#ffffff);border-bottom:1px solid var(--border-soft);padding:16px 18px}
.card-header h3{margin:0;font-weight:700;color:#0f172a}
.card-body{padding:18px}
.form-group label{font-weight:600;color:#374151;margin-bottom:6px;display:block}
.form-control{border:1px solid var(--border-soft);border-radius:10px;box-shadow:none;height:42px}
.form-control:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(14,165,233,.2)}
.select2-container{width:100% !important}
.select2-container .select2-selection--single{height:42px;border-radius:10px;border:1px solid var(--border-soft)}
.select2-container--default .select2-selection--single .select2-selection__rendered{line-height:42px;padding-left:12px}
.select2-container--default .select2-selection--single .select2-selection__arrow{height:40px}
.modal-footer{border-top:1px solid var(--border-soft);background:#fff;padding:14px}
.btn{border-radius:10px}
.btn-primary{background:var(--primary);border-color:var(--primary)}
.btn-primary:hover{background:var(--primary-dark);border-color:var(--primary-dark)}
.btn-secondary{background:#6b7280;border-color:#6b7280;color:#fff}
.btn-secondary:hover{background:#4b5563;border-color:#4b5563;color:#fff}
</style>

<div class="card">
  <div class="card-header">
    <h3>Form Realisasi Belanja</h3>
  </div>

  <div class="card-body">
    <form action="{?=url([ADMIN, 'hosplan', 'updaterebel'])?}" method="post">
      <input type="hidden" id="id_rebel" name="id_rebel" value="{$rebel.id_rebel}">


        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="kode_akun">Kode Akun</label>
            <input id="kode_akun" type="text" class="form-control" name="kode_akun" value="{$rebel.kode_akun}" placeholder="Masukkan Kode Akun" required>
          </div>
          <div class="col-md-6 mb-3">
            <label for="uraian_kegiatan">Uraian Kegiatan</label>
            <input id="uraian_kegiatan" type="text" class="form-control" name="uraian_kegiatan" value="{$rebel.uraian_kegiatan}" placeholder="Masukkan Uraian Kegiatan" required>
          </div>
        </div>

        <div class="row">
          <div class="col-md-3 mb-3" style="margin-top: 12px;">
            <label for="januari">Januari</label>
            <input id="januari" type="text" class="form-control money" name="januari" value="{$rebel.januari}" placeholder="Masukkan Januari" required>
          </div>
          <div class="col-md-3 mb-3" style="margin-top: 12px;">
            <label for="februari">Februari</label>
            <input id="februari" type="text" class="form-control money" name="februari" value="{$rebel.februari}" placeholder="Masukkan Februari" required>
          </div>
          <div class="col-md-3 mb-3" style="margin-top: 12px;">
            <label for="maret">Maret</label>
            <input id="maret" type="text" class="form-control money" name="maret" value="{$rebel.maret}" placeholder="Masukkan Maret" required>
          </div>
          <div class="col-md-3 mb-3" style="margin-top: 12px;">
            <label for="april">April</label>
            <input id="april" type="text" class="form-control money" name="april" value="{$rebel.april}" placeholder="Masukkan April" required>
          </div>
        </div>

        <div class="row">
          <div class="col-md-3 mb-3" style="margin-top: 12px;">
            <label for="mei">Mei</label>
            <input id="mei" type="text" class="form-control money" name="mei" value="{$rebel.mei}" placeholder="Masukkan Mei" required>
          </div>
          <div class="col-md-3 mb-3" style="margin-top: 12px;">
            <label for="juni">Juni</label>
            <input id="juni" type="text" class="form-control money" name="juni" value="{$rebel.juni}" placeholder="Masukkan Juni" required>
          </div>
          <div class="col-md-3 mb-3" style="margin-top: 12px;">
            <label for="juli">Juli</label>
            <input id="juli" type="text" class="form-control money" name="juli" value="{$rebel.juli}" placeholder="Masukkan Juli" required>
          </div>
          <div class="col-md-3 mb-3" style="margin-top: 12px;">
            <label for="agustus">Agustus</label>
            <input id="agustus" type="text" class="form-control money" name="agustus" value="{$rebel.agustus}" placeholder="Masukkan Agustus" required>
          </div>
        </div>

        <div class="row">
          <div class="col-md-3 mb-3" style="margin-top: 12px;">
            <label for="september">September</label>
            <input id="september" type="text" class="form-control money" name="september" value="{$rebel.september}" placeholder="Masukkan September" required>
          </div>
          <div class="col-md-3 mb-3" style="margin-top: 12px;">
            <label for="oktober">Oktober</label>
            <input id="oktober" type="text" class="form-control money" name="oktober" value="{$rebel.oktober}" placeholder="Masukkan Oktober" required>
          </div>
          <div class="col-md-3 mb-3" style="margin-top: 12px;">
            <label for="november">November</label>
            <input id="november" type="text" class="form-control money" name="november" value="{$rebel.november}" placeholder="Masukkan November" required>
          </div>
          <div class="col-md-3 mb-3" style="margin-top: 12px;">
            <label for="desember">Desember</label>
            <input id="desember" type="text" class="form-control money" name="desember" value="{$rebel.desember}" placeholder="Masukkan Desember" required>
          </div>
        </div>

        <div class="modal-footer justify-content-between" style="margin-top: 30px;">
            <a href="{?=url([ADMIN, 'hosplan', 'rebel'])?}" class="btn btn-secondary">Kembali</a>
            <button type="submit" class="btn btn-primary">Simpan</button>
        </div>

    </form>
  </div>
</div>

<script>
$(document).ready(function() {
  $('.select2').select2({
    placeholder: "Ketik minimal 3 huruf untuk mencari...",
    width: '100%',
    language: {
      inputTooShort: function() {
        return "Ketik minimal 3 huruf untuk mencari";
      },
      noResults: function() {
        return "Tidak ada hasil ditemukan";
      }
    }
  });

  function onlyDigits(str){ return String(str||'').replace(/\D+/g,''); }
  function toInt(str){ var s = onlyDigits(str); var n = parseInt(s,10); return isNaN(n)?0:n; }
  function formatId(n){ return (n||0).toLocaleString('id-ID'); }
  $('.money').each(function(){
    var v = toInt($(this).val());
    $(this).val(formatId(v));
  }).on('input', function(){
    var v = toInt($(this).val());
    $(this).val(formatId(v));
  });
  $('form').on('submit', function(){
    $('.money').each(function(){
      $(this).val(toInt($(this).val()));
    });
  });
});
</script>
